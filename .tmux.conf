# Terminal identity + truecolor
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",xterm-256color:Tc"

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'

# Override tmux-sensible defaults
set -g history-limit 50000
set -g escape-time 0

# Required for Neovim autoread/FocusGained
set -g focus-events on

# Window/pane numbering
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on

# Status bar
set -g status-interval 15
set -g status-style "bg=colour235,fg=colour244"
set -g status-left "#[fg=colour39,bold] #S #[fg=colour244]"
set -g status-right "#[fg=colour244]#h  #[fg=colour39]%H:%M "
set -g status-left-length 40
set -g status-right-length 80
set -g status-justify absolute-centre
set -g window-status-current-style "fg=colour39,bold"
set -g window-status-style "fg=colour244"

# Pane borders
set -g pane-border-style "fg=colour235"
set -g pane-active-border-style "fg=colour39"

set -g default-shell $SHELL

set -g status-keys vi
setw -g mode-keys vi

set -g mouse on
bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "pbcopy"

# Easily move between panes
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Reload config
bind r source-file ~/.tmux.conf \; display-message "Reloaded ~/.tmux.conf"

# Clipboard config
# Debugging hook: tmux list-keys -T copy-mode-vi
# Native clipboard
set -g set-clipboard on
# Setup 'v' to begin selection as in Vim
bind-key -T copy-mode-vi v send-keys -X begin-selection
# Setup 'y' to yank selection like Vim
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"
# Update default binding of `Enter` to also use copy-pipe
unbind -T copy-mode-vi Enter
bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "pbcopy"
# Bind ']' to use pbpaste
bind ] run-shell "pbpaste | tmux load-buffer - && tmux paste-buffer"
# End clipboard config

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
